generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model Workflow {
  id        String   @id @default(uuid())
  title     String
  userId    String
  nodes     Json
  connections Json
  enabled   Boolean   @default(true)
  trigger   Trigger?
  actions   Action[]
  edges     Edge[]

  createdAt DateTime @default(now())
}

model Trigger {
  id                   String   @id @default(uuid())
  workflowId            String   @unique
  availableTriggersId  String
  metadata              Json
  positionX             Int
  positionY             Int

  workflow Workflow @relation(fields: [workflowId], references: [id])
}

model Action {
  id                String   @id @default(uuid())
  workflowId         String
  availableActionId String
  sortingOrder       Int
  metadata           Json
  positionX          Int
  positionY          Int

  workflow Workflow @relation(fields: [workflowId], references: [id])
}

model Edge {
  id           String   @id @default(uuid())
  workflowId   String
  sourceNodeId String
  targetNodeId String

  workflow Workflow @relation(fields: [workflowId], references: [id])
}
